
import subprocess
import multiprocessing
from flask import Flask
from threading import Thread

app = Flask('')


@app.route('/')
def main():
    return "Codebuilder Bot"


def run():
    app.run(host="0.0.0.0", port=8000)


def keep_alive():
    server = Thread(target=run)
    server.start()


keep_alive()

print(multiprocessing.current_process().pid)

result = 1

print("about to start subprocess")
result = subprocess.check_call("python ./bot.py", shell=True)
print("started subprocess by now")

# while result == 1:
#     print("about to restart subprocess")
#     result = subprocess.check_call("python ./bot.py", shell=True)
#     print("restarted subprocess by now")

#     print(result)

print("stayin' alive")
